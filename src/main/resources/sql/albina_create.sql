create table avalanche_bulletin_additional_users (AVALANCHE_BULLETIN_ID varchar(191) not null, ADDITIONAL_USER_NAME varchar(191)) engine=InnoDB;
create table avalanche_bulletin_daytime_descriptions (ID varchar(191) not null, COMPLEXITY varchar(191), DANGER_RATING_ABOVE varchar(191), DANGER_RATING_BELOW varchar(191), ELEVATION integer, HAS_ELEVATION_DEPENDENCY bit default false, TERRAIN_FEATURE_ABOVE_TEXTCAT longtext, TERRAIN_FEATURE_BELOW_TEXTCAT longtext, TREELINE bit default false, AVALANCHE_PROBLEM_1_ID varchar(191), AVALANCHE_PROBLEM_2_ID varchar(191), AVALANCHE_PROBLEM_3_ID varchar(191), AVALANCHE_PROBLEM_4_ID varchar(191), AVALANCHE_PROBLEM_5_ID varchar(191), primary key (ID)) engine=InnoDB;
create table avalanche_bulletin_published_regions (AVALANCHE_BULLETIN_ID varchar(191) not null, REGION_ID varchar(191)) engine=InnoDB;
create table avalanche_bulletin_saved_regions (AVALANCHE_BULLETIN_ID varchar(191) not null, REGION_ID varchar(191)) engine=InnoDB;
create table avalanche_bulletin_suggested_regions (AVALANCHE_BULLETIN_ID varchar(191) not null, REGION_ID varchar(191)) engine=InnoDB;
create table avalanche_bulletin_texts (AVALANCHE_BULLETIN_ID varchar(191) not null, TEXTS_ID varchar(191) not null, TEXT_TYPE varchar(191) not null, primary key (AVALANCHE_BULLETIN_ID, TEXT_TYPE)) engine=InnoDB;
create table avalanche_bulletins (ID varchar(191) not null, AV_ACTIVITY_COMMENT_NOTES longtext, AV_ACTIVITY_COMMENT_TEXTCAT longtext, AV_ACTIVITY_HIGHLIGHTS_NOTES longtext, AV_ACTIVITY_HIGHLIGHTS_TEXTCAT longtext, DANGER_PATTERN_1 varchar(191), DANGER_PATTERN_2 varchar(191), HAS_DAYTIME_DEPENDENCY bit default false, HIGHLIGHTS_TEXTCAT longtext, OWNER_REGION varchar(191), PUBLICATION_DATE datetime, SNOWPACK_STRUCTURE_COMMENT_NOTES longtext, SNOWPACK_STRUCTURE_COMMENT_TEXTCAT longtext, SNOWPACK_STRUCTURE_HIGHLIGHTS_NOTES longtext, SNOWPACK_STRUCTURE_HIGHLIGHTS_TEXTCAT longtext, TENDENCY varchar(191), TENDENCY_COMMENT_NOTES longtext, TENDENCY_COMMENT_TEXTCAT longtext, VALID_FROM datetime, VALID_UNTIL datetime, AFTERNOON_ID varchar(191), FORENOON_ID varchar(191), USER_ID varchar(191), primary key (ID)) engine=InnoDB;
create table avalanche_problem_aspects (AVALANCHE_PROBLEM_ID varchar(191) not null, ASPECT integer) engine=InnoDB;
create table avalanche_problems (ID varchar(191) not null, AVALANCHE_PROBLEM varchar(191), DANGER_RATING_DIRECTION varchar(191), AVALANCHE_SIZE varchar(191), AVALANCHE_SIZE_VALUE integer, DANGER_RATING varchar(191), DANGER_RATING_MODIFICATOR varchar(191), FREQUENCY varchar(191), FREQUENCY_VALUE integer, SNOWPACK_STABILITY varchar(191), SNOWPACK_STABILITY_VALUE integer, ELEVATION_HIGH integer, ELEVATION_LOW integer, ARTIFICIAL_AVALANCHE_RELEASE_PROBABILITY varchar(191), ARTIFICIAL_AVALANCHE_SIZE varchar(191), ARTIFICIAL_DANGER_RATING varchar(191), ARTIFICIAL_HAZARD_SITE_DISTRIBUTION varchar(191), NATURAL_AVALANCHE_RELEASE_PROBABILITY varchar(191), NATURAL_DANGER_RATING varchar(191), NATURAL_HAZARD_SITE_DISTRIBUTION varchar(191), TERRAIN_FEATURE_TEXTCAT longtext, TREELINE_HIGH bit default false, TREELINE_LOW bit default false, primary key (ID)) engine=InnoDB;
create table avalanche_reports (ID varchar(191) not null, CAAML_V5_CREATED bit default false, CAAML_V6_CREATED bit default false, DATE datetime, EMAIL_CREATED bit default false, HTML_CREATED bit default false, JSON_CREATED bit default false, JSON_STRING longtext, MAP_CREATED bit default false, MEDIA_FILE_UPLOADED bit default false, PDF_CREATED bit default false, PUSH_SENT bit default false, STATUS integer, TELEGRAM_SENT bit default false, TIMESTAMP datetime, REGION_ID varchar(191), USER_ID varchar(191), primary key (ID)) engine=InnoDB;
create table chat_messages (ID varchar(191) not null, CHAT_ID integer, DATETIME datetime, TEXT varchar(191), USERNAME varchar(191), primary key (ID)) engine=InnoDB;
create table google_blogger_configurations (ID bigint not null auto_increment, API_KEY varchar(191), BLOG_API_URL varchar(191), BLOG_ID varchar(191), BLOG_URL varchar(191), LANGUAGE_CODE varchar(191), REGION_ID varchar(191), primary key (ID)) engine=InnoDB;
create table observations (ID bigint not null auto_increment, ASPECT varchar(191), AUTHOR_NAME varchar(191), CONTENT longtext, ELEVATION double precision, EVENT_DATE datetime, EVENT_TYPE integer, LATITUDE double precision, LOCATION_NAME varchar(191), LONGITUDE double precision, REGION_ID varchar(191), REPORT_DATE datetime, primary key (ID)) engine=InnoDB;
create table push_configurations (ID bigint not null auto_increment, VAPID_PRIVATE_KEY varchar(191), VAPID_PUBLIC_KEY varchar(191), primary key (ID)) engine=InnoDB;
create table push_subscriptions (ID bigint not null auto_increment, AUTH varchar(191), ENDPOINT longtext, FAILED_COUNT integer, LANGUAGE_CODE varchar(191), P256DH varchar(191), REGION_ID varchar(191), SUBSCRIBE_DATE datetime, primary key (ID)) engine=InnoDB;
create table rapid_mail_configurations (ID bigint not null auto_increment, PASSWORD varchar(191), USERNAME varchar(191), REGION_ID varchar(191), primary key (ID)) engine=InnoDB;
create table region_hierarchy (SUB_REGION_ID varchar(191) not null, SUPER_REGION_ID varchar(191) not null, primary key (SUPER_REGION_ID, SUB_REGION_ID)) engine=InnoDB;
create table region_neighbors (REGION_ID varchar(191) not null, NEIGHBOR_REGION_ID varchar(191) not null, primary key (REGION_ID, NEIGHBOR_REGION_ID)) engine=InnoDB;
create table regions (ID varchar(191) not null, CREATE_CAAML_V5 bit default false, CREATE_CAAML_V6 bit default false, CREATE_JSON bit default false, CREATE_MAPS bit default false, CREATE_PDF bit default false, CREATE_SIMPLE_HTML bit default false, EMAIL_COLOR varchar(191), ENABLE_AVALANCHE_PROBLEM_CORNICES bit default false, ENABLE_AVALANCHE_PROBLEM_NO_DISTINCT_AVALANCHE_PROBLEM bit default false, ENABLE_MEDIA_FILE bit default false, GEO_DATA_DIRECTORY varchar(191), IMAGE_COLORBAR_BW_PATH varchar(191), IMAGE_COLORBAR_COLOR_PATH varchar(191), MAP_CENTER_LAT double precision, MAP_CENTER_LNG double precision, MAP_LOGO_BW_PATH varchar(191), MAP_LOGO_COLOR_PATH varchar(191), MAP_LOGO_POSITION varchar(191), MAP_X_MAX integer, MAP_X_MIN integer, MAP_Y_MAX integer, MAP_Y_MIN integer, MICRO_REGIONS integer, PDF_COLOR varchar(191), PDF_FOOTER_LOGO bit default false, PDF_FOOTER_LOGO_BW_PATH varchar(191), PDF_FOOTER_LOGO_COLOR_PATH varchar(191), PDF_MAP_HEIGHT integer, PDF_MAP_WIDTH_AM_PM integer, PDF_MAP_WIDTH_FD integer, PDF_MAP_Y_AM_PM integer, PDF_MAP_Y_FD integer, PUBLISH_BLOGS bit default false, PUBLISH_BULLETINS bit default false, SEND_EMAILS bit default false, SEND_PUSH_NOTIFICATIONS bit default false, SEND_TELEGRAM_MESSAGES bit default false, SHOW_MATRIX bit default false, SIMPLE_HTML_TEMPLATE_NAME varchar(191), SERVER_INSTANCE_ID bigint, primary key (ID)) engine=InnoDB;
create table server_instances (ID bigint not null auto_increment, API_URL varchar(191), EXTERNAL_SERVER bit default false, HTML_DIRECTORY varchar(191), MAP_PRODUCTION_URL varchar(191), MAPS_PATH varchar(191), MEDIA_PATH varchar(191), NAME varchar(191), PASSWORD varchar(191), PDF_DIRECTORY varchar(191), PUBLISH_AT_5PM bit default false, PUBLISH_AT_8PM bit default false, SERVER_IMAGES_URL varchar(191), USER_NAME varchar(191), primary key (ID)) engine=InnoDB;
create table subscriber_regions (SUBSCRIBER_ID varchar(191) not null, REGION_ID varchar(191) not null) engine=InnoDB;
create table subscribers (EMAIL varchar(191) not null, CONFIRMED bit default false, LANGUAGE varchar(191), PDF_ATTACHMENT bit default false, primary key (EMAIL)) engine=InnoDB;
create table telegram_configurations (ID bigint not null auto_increment, API_TOKEN varchar(191), CHAT_ID varchar(191), LANGUAGE_CODE varchar(191), REGION_ID varchar(191), primary key (ID)) engine=InnoDB;
create table text_parts (TEXTS_ID varchar(191) not null, LANGUAGE_CODE varchar(191), TEXT longtext) engine=InnoDB;
create table texts (ID varchar(191) not null, primary key (ID)) engine=InnoDB;
create table user_region (USER_EMAIL varchar(191) not null, REGION_ID varchar(191) not null, primary key (USER_EMAIL, REGION_ID)) engine=InnoDB;
create table user_region_role_links (ID bigint not null auto_increment, ROLE varchar(191), REGION_ID varchar(191), USER_EMAIL varchar(191), primary key (ID)) engine=InnoDB;
create table user_role (USER_EMAIL varchar(191) not null, USER_ROLE varchar(191)) engine=InnoDB;
create table users (EMAIL varchar(191) not null, IMAGE LONGBLOB, NAME varchar(191), ORGANIZATION varchar(191), PASSWORD varchar(191), primary key (EMAIL)) engine=InnoDB;
alter table avalanche_bulletin_texts add constraint UK_ptswdete5bai6keem5mqpy1qu unique (TEXTS_ID);
create index avalanche_reports_DATE_IDX on avalanche_reports (DATE);
alter table avalanche_bulletin_additional_users add constraint FKb66t7jbpnalfa3f7dem9m7i3x foreign key (AVALANCHE_BULLETIN_ID) references avalanche_bulletins (ID);
alter table avalanche_bulletin_daytime_descriptions add constraint FKqgs5r0o3h400uattltrf5ro9p foreign key (AVALANCHE_PROBLEM_1_ID) references avalanche_problems (ID);
alter table avalanche_bulletin_daytime_descriptions add constraint FK8o1sce1w8f39dbd7o8905a6mh foreign key (AVALANCHE_PROBLEM_2_ID) references avalanche_problems (ID);
alter table avalanche_bulletin_daytime_descriptions add constraint FK29v1h70w7smuv5uksp329xk1p foreign key (AVALANCHE_PROBLEM_3_ID) references avalanche_problems (ID);
alter table avalanche_bulletin_daytime_descriptions add constraint FK2idj377s48ea0gfm7selv98i1 foreign key (AVALANCHE_PROBLEM_4_ID) references avalanche_problems (ID);
alter table avalanche_bulletin_daytime_descriptions add constraint FKhrc3r32lf8fu668perfr6e8lw foreign key (AVALANCHE_PROBLEM_5_ID) references avalanche_problems (ID);
alter table avalanche_bulletin_published_regions add constraint FKq791759t4ngwy3xnjcsarubd9 foreign key (AVALANCHE_BULLETIN_ID) references avalanche_bulletins (ID);
alter table avalanche_bulletin_saved_regions add constraint FK51xgpiadqoop7mkuw02n2kvhl foreign key (AVALANCHE_BULLETIN_ID) references avalanche_bulletins (ID);
alter table avalanche_bulletin_suggested_regions add constraint FKnvuoxj1thuu09jriacj91e3c9 foreign key (AVALANCHE_BULLETIN_ID) references avalanche_bulletins (ID);
alter table avalanche_bulletin_texts add constraint FKrrg7cyd64c8i2brbfnai6jc7v foreign key (TEXTS_ID) references texts (ID);
alter table avalanche_bulletin_texts add constraint FKfr6qmtqtki9hj78bm72gtt8bp foreign key (AVALANCHE_BULLETIN_ID) references avalanche_bulletins (ID);
alter table avalanche_bulletins add constraint FKs8wvyul8jsdqfnp0epdgvk3c2 foreign key (AFTERNOON_ID) references avalanche_bulletin_daytime_descriptions (ID);
alter table avalanche_bulletins add constraint FKb5w9xw8i333rismcrri62umqw foreign key (FORENOON_ID) references avalanche_bulletin_daytime_descriptions (ID);
alter table avalanche_bulletins add constraint FKpklhevlq5xr3l8mq0cll6aoem foreign key (USER_ID) references users (EMAIL);
alter table avalanche_problem_aspects add constraint FKd1xfm95tvk97y0ab8l2eu125x foreign key (AVALANCHE_PROBLEM_ID) references avalanche_problems (ID);
alter table avalanche_reports add constraint FKj2jj2lgknd44i41wsagrprpro foreign key (REGION_ID) references regions (ID);
alter table avalanche_reports add constraint FKajgejvjpourfacpfjn6ndlb6c foreign key (USER_ID) references users (EMAIL);
alter table google_blogger_configurations add constraint FKe8ekul2ewkhmwkmwa5j3q8o9d foreign key (REGION_ID) references regions (ID);
alter table rapid_mail_configurations add constraint FK43imjvb3ly5k5m1tc8nsllf47 foreign key (REGION_ID) references regions (ID);
alter table region_hierarchy add constraint FKb39ivcay57i43jenoty5oe9kv foreign key (SUPER_REGION_ID) references regions (ID);
alter table region_hierarchy add constraint FKjedd3newdligaejyttbvggv3y foreign key (SUB_REGION_ID) references regions (ID);
alter table region_neighbors add constraint FK5yviwfqh8ubmtw7ypnuxp6u6t foreign key (NEIGHBOR_REGION_ID) references regions (ID);
alter table region_neighbors add constraint FKsp2919qu9ds8xsn731ye2xmit foreign key (REGION_ID) references regions (ID);
alter table regions add constraint FKe74kalgqbt19lryn1tehx99r1 foreign key (SERVER_INSTANCE_ID) references server_instances (ID);
alter table subscriber_regions add constraint FKqecsb6dfglu61bfbwnn05vj6p foreign key (REGION_ID) references regions (ID);
alter table subscriber_regions add constraint FKcedrtfonb8j38kg7l4omkli7y foreign key (SUBSCRIBER_ID) references subscribers (EMAIL);
alter table telegram_configurations add constraint FKlkl3bidyff9q9boyjgua3evn0 foreign key (REGION_ID) references regions (ID);
alter table text_parts add constraint FKfynmdlr1up76i0oe06jixe48t foreign key (TEXTS_ID) references texts (ID);
alter table user_region add constraint FKbeiyvshltxggmnnjbu87shdgc foreign key (REGION_ID) references regions (ID);
alter table user_region add constraint FKhu6mvkdomq5v4pneu81p7mirn foreign key (USER_EMAIL) references users (EMAIL);
alter table user_region_role_links add constraint FKmkucw3bgvaurlvqbqj3w9sncs foreign key (REGION_ID) references regions (ID);
alter table user_region_role_links add constraint FKef1pg0uirvxqdq5bgq33kd2cp foreign key (USER_EMAIL) references users (EMAIL);
alter table user_role add constraint FK4qllg1csw4u7ir0ysgy0eykqg foreign key (USER_EMAIL) references users (EMAIL);
